@(instance: Instance, user: User, qaIssues: List[QaIssue], qaIssueCategories: Array[uk.bl.Const.QAIssueCategory])

@script = {
	<script>
	</script>
}

@main("", user, script) {

	<ul class="nav nav-tabs">
	   <li class="active"><a href="#">View</a></li>
	   <li><a href="@routes.InstanceController.edit(instance.id)">Edit</a></li>
	</ul>
	
	@warningmessage(flash)
	
	<div class="tab-content padding-20">
	   	<ol class="breadcrumb">
			<li><a href="@routes.TargetController.index()">Targets</a></li>
			<li><a href="@routes.TargetController.view(instance.target.id)">@instance.target.title</a></li>
			<li><a href="@routes.InstanceController.results(instance.target.id)">Instances</a></li>
			<li class="active"><span class="badge">@instance.target.fieldUrl()</span></li>
		</ol>
	</div>
	
	<div id="myTabContent" class="tab-content">
		
		<div class="tab-pane padding-20 fade active in" id="qa">
		
	   		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
						<label for="inputTitle" class="col-sm-6 control-label">Title <font color="red">*</font></label>
					    <div class="col-sm-6">
			            	@instance.title
						</div>
					</div>
				</div>
	     	</div>    	
    		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="qa_status" class="col-sm-6 control-label">QA Status</label>
		            	<div class="col-sm-6">
					        @if(instance.qaIssue != null) {
								@Taxonomy.findQAStatusById(instance.qaIssue.id)
							} else {
							    None
							}
						</div>
		         	</div>
				</div>
			</div>

    		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="qa_issue_category" class="col-sm-6 control-label">QA Issue Category</label>
		            	<div class="col-sm-6">
					        @if(instance.qaIssueCategory != null && instance.qaIssueCategory.length() > 0) {
								@uk.bl.Const.QAIssueCategory.getQAIssueCategory(instance.qaIssueCategory).getValue
							} else {
							    None
							}
						</div>
		         	</div>
				</div>
			</div>

    		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="qa_issue_category" class="col-sm-6 control-label">User</label>
		            	<div class="col-sm-6">
					        @if(instance.authorUser != null) {
								@instance.authorUser.name
							} else {
							    None
							}
						</div>
		         	</div>
				</div>
			</div>
			
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="qa_issue_category" class="col-sm-6 control-label">Hidden <small class="text-center">(Is this instance hidden from public)</small></label>
		            	<div class="col-sm-6">
					        @if(instance.hidden != null && instance.hidden) {  
				                   yes           
				                } else {
				                   no
				                }
						</div>
		         	</div>
				</div>
			</div>

    		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="qa_notes" class="col-sm-6 control-label">QA Notes</label>
		            	<div class="col-sm-6">
			            	@instance.qaNotes
						</div>
		         	</div>
				</div>
			</div>
			
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="quality_notes" class="col-sm-6 control-label">Technical Notes</label>
		            	<div class="col-sm-6">
			            	@instance.notes
						</div>
		         	</div>
				</div>
			</div>	

    		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_seeds" class="col-sm-6 control-label">Crawl Seeds</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_seeds
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_scheduled_start_date" class="col-sm-6 control-label">Scheduled Start Date</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_scheduled_start_date
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_actual_start_date" class="col-sm-6 control-label">Actual Start Date</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_actual_start_date
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_duration_millis" class="col-sm-6 control-label">Duration</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_duration_millis
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_bytes_downloaded" class="col-sm-6 control-label">Bytes Downloaded</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_bytes_downloaded
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_urls_downloaded" class="col-sm-6 control-label">URLs Downloaded</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_urls_downloaded
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_urls_failed" class="col-sm-6 control-label">URLs Failed</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_urls_failed
						</div>
		         	</div>
				</div>
			</div>
			<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
		            	<label for="crawl_additional_information" class="col-sm-6 control-label">Additional Information</label>
		            	<div class="col-sm-6">
			            	@instance.crawl_additional_information
						</div>
		         	</div>
				</div>
			</div>

       		<div class="row padding-10">
	     		<div class="col-md-12 col-xs-12 col-sm-12">
					<div class="form-group">
						<label for="inputUrls" class="col-sm-6 control-label">
							@if(instance.target != null) {
								@for(fieldUrl <- instance.target.fieldUrls) {
									<br><a href="@routes.InstanceController.index()/list/?s=title&f=@fieldUrl.url">all instances for the target</a>
								}
							}
						</label>
					</div>
				</div>
	     	</div>	 		     	    				
		</div>
	</div>

	<hr>

	<div id="revisionArea" class="revision">
		<dl class="dl-horizontal">
			<dt>Revision log message:</dt>
			<dd>@instance.revision</dd>
		</dl>
	</div>
		
	<div class="padding-20">
		<div class="panel-group" id="accordion">
			<div class="panel panel-primary" id="panels">
				<div class="panel-heading">
			    	<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseInstances" style="color:#fff;">
			        	Instances
					</a>
				</div>
				<div id="collapseInstances" class="panel-collapse collapse">
					@for(fieldUrl <- instance.target.fieldUrls) {
						<div class="padding-10">
							<strong><a href="@fieldUrl.url">@fieldUrl.url</a></strong>
						</div>
						<ul>
							<li>
								<div class="padding-10">
									<a class="brand" target="_blank" href="@play.api.Play.current.configuration.getString("server_name")@play.api.Play.current.configuration.getString("application.context")/wayback/*/@fieldUrl.url">In QA Wayback</a>
								</div>
							</li>
							<li>
							    <div class="padding-10">
						        	<a class="brand" target="_blank" href="http://www.webarchive.org.uk/wayback/archive/*/@fieldUrl.url">In Open UK Web Archive</a>
								</div>
							</li>
							<li>
								<div class="padding-10">
									<a class="brand" target="_blank" href="http://www.webarchive.org.uk/mementos/search/@fieldUrl.url">In other web archives</a>
								</div>
							</li>
							<li>
							    <div class="padding-10">
						        	<a class="brand" target="_blank" href="@fieldUrl.url">Live site</a>
								</div>
							</li>
						</ul>
					}
				</div>
			</div>
		</div>
	</div>
	
	<div class="padding-20">
		<div class="panel-group" id="accordion">
			<div class="panel panel-primary" id="panels">
				<div class="panel-heading">
	  				<a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#collapseRevisions" style="color:#fff;">
	      				Instance revisions
	      			</a>
	      		</div>
				<div id="collapseRevisions" class="panel-collapse collapse">
	       			@for(prevInstance <- Instance.findRevisions(instance.url)) {
	       			<div class="panel-footer">
	       				<a class="brand" href="@routes.InstanceController.viewrevision(prevInstance.id)">
	         				(@prevInstance.id) &nbsp; @prevInstance.revision &nbsp; @prevInstance.updatedAt</a>
	       			</div>
	       			}
	     		</div>
	    	</div>
		</div>
	</div>    
   		
}
